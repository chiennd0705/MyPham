!function(options){var isFnCalledOrEventAttached=!1,DEFAULT_IMAGE="https://c.o-s.io/javascripts/images/imageNotFound.png",requestId=null,GOOGLE_ANALYTICS_TAG=null;function ready(e){"loading"!=document.readyState?(isFnCalledOrEventAttached=!0,e()):document.addEventListener?(isFnCalledOrEventAttached=!0,document.addEventListener("DOMContentLoaded",e)):(isFnCalledOrEventAttached=!0,document.attachEvent&&document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&e()}))}function str2bool(e){return e&&"string"==typeof e?"true"==e.toLowerCase()||"1"==e:1==e}function extend(){var a={},n=!1,e=0,t=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],e++);for(var i=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n&&"[object Object]"===Object.prototype.toString.call(e[t])?a[t]=extend(!0,a[t],e[t]):a[t]=e[t])};e<t;e++){i(arguments[e])}return a}function appendTo(e,t){t=t||"head";document.getElementsByTagName(t)[0].appendChild(e)}function appendToClass(e,t){document.getElementsByClassName(t)[0].appendChild(e)}function loadSokratiTracker(e,t){window._sokClient=window._sokClient||e.clientId;if(window.sokrati)t();else{var a=document.createElement("script");a.type="text/javascript",a.async=!0,null===a.onload?a.onload=t:void 0!==a.readyState&&(a.onreadystatechange=function(){"loaded"===this.readyState&&t()}),a.src="https://c.o-s.io/javascripts/tracker.js",appendTo(a,"head")}}function track(e){isDemo()||(requestId&&(e.request_id=requestId),"undefined"!=typeof sokrati?sokrati.beaconParams("widget","widget",e):(console.debug("[os.ai] Params pushed to the queue:"+JSON.stringify(e)),setTimeout(function(){track(e)},500)),e.error||e.errorMsg||!GOOGLE_ANALYTICS_TAG||"widget_not_shown_less_product_count"==e.lead_step||"graviti_load"==e.lead_step||("widget_ab_visible_false"==e.lead_step?e.lead_step="graviti_not_interacted":e.lead_step="graviti_interacted",ga("graviti.send",{hitType:"event",eventCategory:"graviti",eventAction:e.lead_step})))}function addCustomEvent(e,t,a){null!=e&&void 0!==e&&(e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a)}function getTemplate(e){for(var t=[],a=0;a<e.panes;a++)t.push('<div class="os-product-list" id="pane-'+a+'"></div>');t=t.join("");var n=document.createElement("div"),i="";i='<div class="" id="gravitiDiv" style="display:none; right: -140px;">    <div class="gravitiButton btn" href="javascript:void(0);"><span class="heart-icon"></span><span class="gravitiText"><span class="textSection">'+e.button.text+'</span><span class="filler" style="width: 0%;"></span></span><span class="sokCounter" style="display: none;">0</span></div><div class="gravitiMainContainer" style="width: 137px;"><div class="gravitiCategoryContainer"><p style="height: 25px; margin: auto; margin-top: 10px;">'+e.title+'</p></div><div class="gravitiErrorContainer padding10 fk-hidden" style="display: none;"><span>Some error has occured while getting your suggestions list.</span></div><div class="gravitiInfoContainer padding10">Suggestions are loading...</div><div class="gravitiProductsContainer"><div class="os-product-list-wrap">'+t+'</div><div class="product-controls">',1<a&&(i+='<span class="left-btn control-btn" href="javascript:void(0);" data-operator="-">&#8249;</span><span class="right-btn control-btn" href="javascript:void(0);" data-operator="+">&#8250;</span>'),i+='<ol class="product-indicators">';for(a=0;a<e.panes;a++)i+='<li data-pane-no="'+a+'" class='+(0===a?"active":"")+"></li>";return window.hasOwnProperty("Haravan")?i+='</ol></div></div><div class="gravitiFooterContainer"> <div class="gravitiFooterInnerContainer"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13"> <g data-name="Layer 2"> <g data-name="Layer 1"> <path fill="#fcf4a0" d="M6.58.75L.75 7.06h3.54l-1.95 4.83L8.4 5.24H4.57L6.58.75z"></path> <path d="M6.58.75l-2 4.49H8.4l-6.06 6.65 2-4.83H.75L6.58.75m0-.75a.67.67 0 0 0-.37.11.65.65 0 0 0-.21.13L.2 6.55a.75.75 0 0 0 .55 1.26h2.43l-1.54 3.8a.76.76 0 0 0 .3.92.8.8 0 0 0 .4.11.74.74 0 0 0 .55-.24L9 5.75a.75.75 0 0 0-.6-1.26H5.73L7.24 1.1a.68.68 0 0 0 .09-.35.75.75 0 0 0-.74-.75zm0 1.5z" fill="#f4a51f"></path> </g> </g> </svg>&nbsp;by <a href="https://haravan.com?utm_source=acquire-client&amp;utm_medium=powered%20by%20onlinesales" target="_blank"><span>Haravan</span></a> <span>and</span> <a href="https://onlinesales.ai/engage/boost-roi-with-graviti?utm_source=acquire-client&amp;utm_medium=powered%20by%20onlinesales" target="_blank"><span>OnlineSales.ai</span></a> </div></div></div><span class="gravitiMobileClose" href="#">x</span></div>':i+='</ol></div></div><div class="gravitiFooterContainer"> <div class="gravitiFooterInnerContainer"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13"> <g data-name="Layer 2"> <g data-name="Layer 1"> <path fill="#fcf4a0" d="M6.58.75L.75 7.06h3.54l-1.95 4.83L8.4 5.24H4.57L6.58.75z"></path> <path d="M6.58.75l-2 4.49H8.4l-6.06 6.65 2-4.83H.75L6.58.75m0-.75a.67.67 0 0 0-.37.11.65.65 0 0 0-.21.13L.2 6.55a.75.75 0 0 0 .55 1.26h2.43l-1.54 3.8a.76.76 0 0 0 .3.92.8.8 0 0 0 .4.11.74.74 0 0 0 .55-.24L9 5.75a.75.75 0 0 0-.6-1.26H5.73L7.24 1.1a.68.68 0 0 0 .09-.35.75.75 0 0 0-.74-.75zm0 1.5z" fill="#f4a51f"></path> </g> </g> </svg>&nbsp;by <a href="https://onlinesales.ai/engage/boost-roi-with-graviti?utm_source=acquire-client&amp;utm_medium=powered%20by%20onlinesales" target="_blank"><span>OnlineSales.ai</span></a> </div></div></div><span class="gravitiMobileClose" href="#">x</span></div>',n.innerHTML=i,n}function formatPrice(e){return e&&!isNaN(e)?Number(parseFloat(e).toFixed(2)).toLocaleString():e}function priceFormatter(e,t){return e+" "+(t=formatPrice(t))}function isProductDiscounted(e,t){return 0<t&&t<e}function getImageUrl(e){return e.imageUrl||DEFAULT_IMAGE}function getInlineProductTemplate(e,t){for(var a=[],n=[],i=Math.floor(t.length/4)-1,o=0;o<t.length;o++){var r='<div class="col-3-wrap">    <a class="overlay-click" href="'+t[o].destinationUrl+'">        <img src="'+getImageUrl(t[o])+'" alt="'+t[o].name+'" style="width:100%;">        <div class="carousel-caption">            <div style="text-align: left;">                <div class="product-name" style="font-weight: 700; padding-bottom: 2px;">'+t[o].brand+'</div>                <p class="product-desc" style="margin: 0;">'+t[o].name+'</p>            </div>            <div style="text-align: right;">                <div class="product-price '+(isProductDiscounted(t[o].mrp,t[o].salePrice)?"with-discount":"")+'">'+priceFormatter(e.currencyCode,t[o].mrp)+'</div>                <p class="product-price product-discount-price">'+(isProductDiscounted(t[o].mrp,t[o].salePrice)?"NOW "+priceFormatter(e.currencyCode,t[o].salePrice):"")+"</p>            </div>        </div>    </a></div>";if(a.push(r),(o+1)%4==0){var s=n.length,l=s==i?0:s+1,d=0==s?i:s-1;n.push('<input checked="" id="slide-'+s+'" name="carousal-without-overlay" type="radio" /><div class="slide" data-content="'+s+'">'+a.join("")+'</div><nav class="nav"><label class="prev" for="slide-'+l+'"></label><label class="next" for="slide-'+d+'"></label></nav>'),a=[]}}return n.join("")}function getInlineTemplate(e,t){var a=document.createElement("div");return a.className="carousal-without-overlay-parent-wrapper",a.innerHTML='<div class="similar-items-wrapper"><div class="similar-items-txt">'+e.title+'</div></div><div class="slider carousal-content-wrapper carousal-without-overlay-wrapper">'+getInlineProductTemplate(e,t)+"</div>",a}function getInlineCatalogTemplate(e,t){var a=document.createElement("div");a.className="slider carousal-content-wrapper carousal-content-ads-wrapper";for(var n=[],i=0;i<t.length;i++)n.push('<div class="col-4-wrap"><div class="overlay-wrapper"><a class="overlay-click" href="'+t[i].destinationUrl+'"></a></div><div class="content-wrapper"><img class="img-style" src="'+getImageUrl(t[i])+'" alt="'+t[i].name+'" style="width:100%;"><div class="overlay-footer-block"><span>'+e.sponsoredText+'</span></div><div class="carousel-caption"><div style="text-align: left;"><div class="product-name">'+t[i].brand+'</div><em class="product-desc">'+t[i].name+'</em></div><div style="text-align: right;height: 45px;"><div class="product-price '+(isProductDiscounted(t[i].mrp,t[i].salePrice)?"with-discount":"")+'">'+priceFormatter(e.currencyCode,t[i].mrp)+'</div><p class="product-price product-discount-price">'+(isProductDiscounted(t[i].mrp,t[i].salePrice)?"NOW "+priceFormatter(e.currencyCode,t[i].salePrice):"")+'</p></div></div><div class="overlay-footer-block"><span>'+e.sponsoredText+"</span></div></div></div>");return a.innerHTML=n.join(""),a}function loadMetadata(e){var t=document.createElement("meta");if(t.name="viewport",t.content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no",appendTo(t),null!=e.fontUrl&&""!=e.fontUrl){var a=document.createElement("link");a.rel="stylesheet",a.href=e.fontUrl,appendTo(a)}var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e.css,appendTo(n)}function isDemo(){return null!==localStorage.getItem("_sok_products")}function fetch(e,t){if(isDemo())t(null,{response:'{"products": '+localStorage.getItem("_sok_products")+"}"});else{for(var a=null,n="https://x.o-s.io/"+(e.path||"sda")+"?",i=extend({page_type:"HOME",categories:e.path=null,pcnt:5,language:"en"},e),o=[],r=null,s=Object.keys(i),l=0;l<s.length;l++)if(null!=i[s[l]])if(null!=i[s[l]]&&Array.isArray(i[s[l]]))for(var d=0;d<i[s[l]].length;d++)o.push(s[l]+"[]="+encodeURIComponent(i[s[l]][d]));else o.push(s[l]+"="+i[s[l]]);n+=o.join("&"),window.XMLHttpRequest?a=new XMLHttpRequest:window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLHTTP")),a.withCredentials=!0,a.open("GET",n,!0),a.onreadystatechange=function(){4==a.readyState&&"function"==typeof t&&(res=JSON.parse(a.response),requestId=res.requestId,200!=a.status&&(r={showAds:!1,message:"AdServer responded with 400",xhr:JSON.stringify(a)}),t(r,a))},a.send(null)}}function _osAddEventListener(a,n){window.addEventListener("click",function(e){if(a)for(var t=0;t<a.length;t++)a[t]&&(a[t]==e.target||a[t].contains(e.target))&&n(a[t])},!0)}function renderProducts(e,t){for(var a="",n=0,i=0;i<t.length;i++){var o="",r="Buy Now";if("vi"==e.language&&(o="graviti-vi-lang",r="Mua ngay"),a+='<div data-imp-tracked=0 data-sku-id="'+t[i].skuId+'" class="graviti-product-thumb '+o+'"> <a class="graviti-product-main" href="'+t[i].destinationUrl+'"><div class="graviti-image-block"><img src="'+getImageUrl(t[i])+'"><div class="graviti-hover-wrap"><div class="graviti-buy-btn-wrap"><div class="graviti-buy-btn"><input type="button" class="buy-btn" value='+JSON.stringify(r)+' /></div></div></div></div><div class="graviti-product-info"><span class="title">'+t[i].name+'</span><span class="price">'+(t[i].currencyCode||e.currencyCode)+" "+(isProductDiscounted(t[i].mrp,t[i].salePrice)?"<del>"+formatPrice(t[i].mrp)+"</del> "+formatPrice(t[i].salePrice):formatPrice(t[i].mrp))+"</span></div></a></div>",0!=i&&(i+1)%e.minProductCount==0){var s=document.getElementsByClassName("product-indicators")[0];if(!(s=s&&s.children)[n])break;s[n].style.display="inline-block",document.getElementById("pane-"+n++).innerHTML=a,a=""}}document.getElementById("pane-0").style.height="100%",document.getElementById("pane-0").style.opacity=1,_osAddEventListener(document.getElementsByClassName("graviti-product-main"),function(){track({lead_step:"product_click"})})}function gravitiToggle(){var e=document.getElementById("gravitiDiv"),t="graviti_open";e.classList.toggle("expanded"),e.classList.contains("expanded")||(t="graviti_close"),track({lead_step:t}),fireImpressionPixel("0")}function fireImpressionPixel(e){for(var t=document.getElementById("pane-"+e).children,a=0;a<t.length;a++)"1"!=t[a].getAttribute("data-imp-tracked")&&(track({sku_id:t[a].getAttribute("data-sku-id"),lead_step:"impression"}),t[a].setAttribute("data-imp-tracked","1"))}function updateControls(e,t){var a=document.getElementsByClassName("product-indicators");a=(a=a&&a[0]).children;for(var n=0;n<a.length;n++)parseInt(e)==n?a[n].classList.add("active"):a[n].classList.remove("active")}function updatePane(e){for(var t=document.getElementsByClassName("os-product-list"),a=0;a<t.length;a++)"pane-"+e==t[a].id?(t[a].style.height="100%",t[a].style.opacity=1):(t[a].style.opacity=0,t[a].style.height="0");fireImpressionPixel(e)}function loadOverlayWidget(options){addCustomEvent(document.body,"click",function(e){if(e.target.className&&null!=e.target.className.match(/gravitiText|textSection|gravitiMobileClose/i))gravitiToggle(),e.stopPropagation();else if(e.target.getAttribute("data-pane-no"))track({lead_step:"controls_clicked_"+e.target.getAttribute("data-pane-no")}),updateControls(e.target.getAttribute("data-pane-no")),updatePane(e.target.getAttribute("data-pane-no")),e.stopPropagation();else if(e.target.classList.contains("control-btn")){var currentEle=document.querySelector("#gravitiDiv .product-controls ol li.active"),operator=e.target.getAttribute("data-operator"),allEle=document.querySelectorAll("#gravitiDiv .product-controls ol li"),paneNo=eval(currentEle.getAttribute("data-pane-no")+operator+"1")%allEle.length;paneNo<0&&(paneNo=allEle.length-1),track({lead_step:"controls_clicked_"+operator}),updateControls(paneNo,!1),updatePane(paneNo),e.stopPropagation()}}),fetch({client_id:window._sokClient||options.clientId,pcnt:options.minProductCount*options.panes,page_type:options.pageType,sku_ids:options.skuIds,categories:options.categories||null,path:options.path,layout:options.layout,language:options.language,aid:options.agencyId},function(e,t){if(e)track({error:JSON.stringify(e)});else{var a=JSON.parse(t.response);if((a=a&&a.products).length<options.minProductCount)return console.log("[os.ai] products fetched: "+a.length),void track({lead_step:"widget_not_shown_less_product_count",products_fetched:a.length,products_requested:options.minProductCount});options.panes=Math.floor(a.length/options.minProductCount),appendTo(getTemplate(options),"body"),renderProducts(options,a),track({lead_step:"graviti_load"})}})}function sanitzieCategories(e){return null!=e[1]&&(e[1]=e[1].replace(/men's|women's/gi,"").trim()),null!=e[2]&&(e[2]=e[2].replace(/polos/gi,"polo shirts").trim()),e}function loadInlineWidget(n){if(0!=document.getElementsByClassName(n.siblingClassName.INLINE).length){var e="undefined"!=typeof OSaiLayer&&OSaiLayer.sku_id&&[OSaiLayer.sku_id]||[];if(e){var t=[];"undefined"!=typeof dataLayer?(t.push(dataLayer[0].Gender_Category),t.push(dataLayer[0].Product_Category),t.push(dataLayer[0].Product_Subcategory),fetch({client_id:window._sokClient||n.clientId,page_type:"PRODUCT",categories:sanitzieCategories(t),sku_ids:e,pcnt:8},function(e,t){if(e)track({error:JSON.stringify(e)});else{var a=JSON.parse(t.response);if((a=a&&a.products).length<4)return console.log("[os.ai] products fetched: "+a.length),void track({lead_step:"widget_not_shown_less_product_count",products_fetched:a.length,products_requested:n.minProductCount});appendToClass(getInlineTemplate(n,a),n.siblingClassName.INLINE),track({lead_step:"inline_widget_ab_visible_true"})}})):track({lead_step:"widget_not_shown_no_data_layer"})}else track({lead_step:"widget_not_shown_no_sku_ids_found"})}}function loadInlineCatalogWidget(n){var e=document.getElementsByClassName(n.siblingClassName.INLINE_CATALOG),t=[];0<e.length&&(e[0].getAttribute("data-isLoaded")&&"1"==e[0].getAttribute("data-isLoaded")||(e[0].setAttribute("data-isLoaded","1"),t=e[0].getAttribute("data-category").split(">").map(function(e){return e.trim()}),fetch({client_id:window._sokClient||n.clientId,page_type:"CATEGORY",categories:sanitzieCategories(t),pcnt:3},function(e,t){if(e)track({error:JSON.stringify(e)});else{var a=JSON.parse(t.response);if((a=a&&a.products).length<3)return console.log("[os.ai] products fetched: "+a.length),void track({lead_step:"widget_not_shown_less_product_count",products_fetched:a.length,products_requested:n.minProductCount});appendToClass(getInlineCatalogTemplate(n,a),n.siblingClassName.INLINE_CATALOG),track({lead_step:"inline_catalog_widget_ab_visible_true"})}})))}function _init(t){loadMetadata(t),t.layouts&&0!=t.layouts.length?t.layouts.forEach(function(e){switch(e){case"2_COLUMN":t.layout=e,loadOverlayWidget(t);break;case"INLINE":loadInlineWidget(t);break;case"INLINE_CATALOG":loadInlineCatalogWidget(t)}}):track({lead_step:"error",errorMsg:"No layouts configured"})}function getCookie(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var i=a[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}function setCookie(e,t,a){var n="";if(a){var i=new Date;i.setTime(i.getTime()+60*a*1e3),n="; expires="+i.toGMTString()}document.cookie=e+"="+t+n+"; path=/"}function generateUUID(){var a=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(a+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===e?t:3&t|8).toString(16)})}function ab(e,t){var a=getCookie("_sok_"+t),n=null;if(a)n=a;else if("object"==typeof e[t]&&e[t].ab){var i=e[t].ab;n=i.default;var o=Math.random(),r=i.variant._condition;"number"==typeof r&&o<=r&&(n=i.variant.value)}else n=e[t];return setCookie("_sok_"+t,n,10080),n}function getExtendedOptions(e){var t="https://adfactory.s3.amazonaws.com/graviti/css/style.css";e.clientId&&(t="//p.o-s.io/"+e.clientId+"/css/style.min.css"),e.cssUrl&&(t=e.cssUrl);var a=extend({css:t,fontUrl:"https://fonts.googleapis.com/css?family=Open+Sans:400,600",title:"Just for you!",button:{text:"Recommendations for you"},productCountPerPane:4,layout:"2_COLUMN",widgetVisible:{ab:{default:"false",variant:{value:"true",_condition:1}}},enableOnMobile:!0,sponsoredText:"Ad",path:"sda",pageType:"HOME",skuIds:[],categories:[]},e);switch(a.layout){case"2_COLUMN":a.path="graviti",a.minProductCount=4,a.panes=a.panes||3}return a}function toBeShownOnDevice(e){var t=!1;return(/Mobi/.test(navigator.userAgent)||window.screen.width<=480)&&(t=!0),!t||e.enableOnMobile}function loadDiscovery(e){var t,a,n,i,o,r=getExtendedOptions(e);(GOOGLE_ANALYTICS_TAG=e.googleAnalyticsTag||"undefined"!=typeof _osGoogleAnalyticsId?_osGoogleAnalyticsId:"")&&(t=window,a=document,n="ga",t.GoogleAnalyticsObject=n,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,i=a.createElement("script"),o=a.getElementsByTagName("script")[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(i,o),ga("create",GOOGLE_ANALYTICS_TAG,"auto",{name:"graviti"}),ga("graviti.send","pageview")),loadSokratiTracker(r,function(){try{str2bool(ab(r,"widgetVisible"))&&toBeShownOnDevice(r)?ready(function(){_init(r)}):track({lead_step:"widget_ab_visible_false"})}catch(e){track({error:e,errorMsg:JSON.stringify(e.message)})}})}window._sok=window._sok||{},window._sok.loadDiscovery=loadDiscovery}();