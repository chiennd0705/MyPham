@using BuyGroup365.Models.Common;
<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="shortcut icon" href="https://theme.hstatic.net/1000186358/1000470071/14/favicon.png?v=1599" type="image/png">
    <title>
        DHC - Thanh toán đơn hàng
    </title>


    <meta name="description" content="DHC - Thanh toán đơn hàng">

    <link href="/Content/Mypham/css/check_out.css" rel="stylesheet" type="text/css" media="all">
    <link href="/Content/Mypham/css/checkouts.css" rel="stylesheet" type="text/css" media="all">
    <script src="/Content/Mypham/js/jquery-2.2.3.min.js" type="text/javascript"></script>
    <script src="/Content/Mypham/js/inferredEvents.js.tải xuống" async=""></script>
    <script src="/Content/Mypham/js/335864760700645" async=""></script>
    <script src="/Content/Mypham/js/identity.js.tải xuống" async=""></script>
    <script async="" src="/Content/Mypham/js/fbevents.js.tải xuống"></script>
    <script async="" src="https://www.google-analytics.com/analytics.js"></script>
    <script src="/Content/Mypham/js/jquery.min.js.tải xuống" type="text/javascript"></script>

    <script src="/Content/Mypham/js/jquery.validate.js.tải xuống" type="text/javascript"></script>
    <style>

        .mainbar-qr h2 {
            text-align: center;
            font-size: 16px;
            margin-bottom: 30px;
            font-weight: 500;
            color: #212121;
        }

        .mainbar-info .mainbar-qr_section {
            text-align: center;
        }

            .mainbar-info .mainbar-qr_section .count_time {
                margin-bottom: 10px;
                margin-top: 30px;
            }

                .mainbar-info .mainbar-qr_section .count_time .time-out {
                    color: #008fe5;
                }

                .mainbar-info .mainbar-qr_section .count_time .count_text {
                    margin-bottom: 10px;
                }

                .mainbar-info .mainbar-qr_section .count_time .time {
                    display: inline-block;
                    position: relative;
                    font-style: italic;
                    font-size: 12px;
                }

                    .mainbar-info .mainbar-qr_section .count_time .time i {
                        width: 10px;
                        height: 10px;
                        border: 1px solid #333;
                        border-bottom-color: transparent;
                        border-radius: 100%;
                        position: absolute;
                        top: 50%;
                        left: -14px;
                        margin-top: -6px;
                        margin-left: -6px;
                        opacity: 1;
                        -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=" 0 ")";
                        filter: alpha(opacity=0);
                        -webkit-animation: rotate 0.5s linear infinite;
                        animation: rotate 0.5s linear infinite;
                        opacity: 1;
                        -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=" 100 ")";
                        filter: alpha(opacity=100);
                    }

        .mainbar-info .mainbar-qr_instruction {
            max-width: 300px;
            margin: auto;
            text-align: center;
            color: #212121;
            line-height: 24px;
        }

        .redeem-login {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .redeem-login-title {
            position: relative;
            display: flex;
            flex-wrap: wrap;
        }

            .redeem-login-title h2 {
                color: #333;
                margin-right: 5px;
            }

        .redeem-login-btn a {
            display: inline-block;
            border-radius: 4px;
            font-weight: 500;
            padding: 13px 10px;
            background: #338dbc;
            color: #fff;
            width: 82px;
            text-align: center;
        }

        .redeem-form-used {
            padding-top: 10px;
        }

        .btn-redeem-loading .btn-redeem-spinner {
            -webkit-animation: rotate 0.5s linear infinite;
            animation: rotate 0.5s linear infinite;
            opacity: 1;
            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=" 100 ")";
            filter: alpha(opacity=100);
        }

        .icon-redeem-button-spinner {
            position: absolute;
            top: 0;
            opacity: 0;
            right: -25px;
            width: 12px;
            height: 12px;
            border: 2px solid #999999;
            border-bottom-color: transparent;
            border-radius: 100%;
        }

        .total-line-table-footer {
            white-space: nowrap;
        }

        .row-align-top {
            vertical-align: top;
        }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2, user-scalable=no">
    <script type="text/javascript">
        var parseQueryString = function (url) {

            var str = url;
            var objURL = {};

            str.replace(
                new RegExp("([^?=&]+)(=([^&]*))?", "g"),
                function ($0, $1, $2, $3) {

                    if ($3 != undefined && $3 != null)
                        objURL[$1] = decodeURIComponent($3);
                    else
                        objURL[$1] = $3;
                });

            return objURL;
        };
    </script>


    <script type="text/javascript">
        window.onpageshow = function (event) {
            if (event.persisted) {
                var currentUrl = '';

                currentUrl = '/checkouts/43e55c00f5ee4d3f91c117003d8466fe?step=1';


                if (currentUrl)
                    window.location = currentUrl;
            }
        };



        var isInit = false;


        function funcFormOnSubmit(e) {
            if (!isInit) {
                isInit = true;

                $.fn.tagName = function () {
                    return this.prop("tagName").toLowerCase();
                };
            }

            if (typeof (e) == 'string') {
                var element = $(e);
                var formData = e;
            } else {
                var element = this;
                var formData = this;
                e.preventDefault();
            }

            $(element).find('button:submit').addClass('btn-loading');

            var formId = $(element).attr('id'), replaceElement = [], funcCallback;

            if (formId == undefined || formId == null || formId == '')
                return;



            if (formId == 'form_next_step') {
                formData = '.step-sections';
                replaceElement.push('.step-sections');
            }
            else if (
                formId == 'form_redeem_add'
                || formId == 'form_redeem_remove'
                || formId == 'form_discount_add'
                || formId == 'form_discount_remove'
                || formId == 'form_update_location'

                || formId == 'form_update_shipping_method'


                || formId == 'section-shipping-rate'

            ) {
                replaceElement.push('#form_update_location');
                replaceElement.push('#change_pick_location_or_shipping');
                replaceElement.push('.inventory_location_data');
                replaceElement.push('.order-summary-toggle-inner .order-summary-toggle-total-recap');
                replaceElement.push('.order-summary-sections');
                replaceElement.push('.order-summary-section.order-summary-section-total-lines.total-line-table.total-line-table-footer');
                replaceElement.push('.order-summary-section.order-summary-section-total-lines.total-line-table.total-line.total-line-redeem');
                replaceElement.push('.order-summary-section.order-summary-section-redeem.redeem-login-section');

                replaceElement.push('#section-shipping-rate');

            }


            if (formId == 'form_update_location_customer_shipping') {
                formId = 'form_update_location';
                replaceElement.push('#form_update_location_customer_shipping');
                replaceElement.push('#change_pick_location_or_shipping');
                replaceElement.push('.inventory_location_data');
                replaceElement.push('.order-summary-toggle-inner .order-summary-toggle-total-recap');
                replaceElement.push('.order-summary-sections');
                replaceElement.push('.order-summary-section.order-summary-section-total-lines.total-line-table.total-line-table-footer');
                replaceElement.push('.order-summary-section.order-summary-section-total-lines.total-line-table.total-line.total-line-redeem');
                replaceElement.push('.order-summary-section.order-summary-section-redeem.redeem-login-section');
            }
            if (formId == 'form_update_location_customer_pick_at_location') {
                formId = 'form_update_location';
                replaceElement.push('#form_update_location_customer_pick_at_location');
                replaceElement.push('#change_pick_location_or_shipping');
                replaceElement.push('.inventory_location_data');
                replaceElement.push('.order-summary-toggle-inner .order-summary-toggle-total-recap');
                replaceElement.push('.order-summary-sections');
                replaceElement.push('.order-summary-section.order-summary-section-total-lines.total-line-table.total-line-table-footer');
                replaceElement.push('.order-summary-section.order-summary-section-total-lines.total-line-table.total-line.total-line-redeem');
                replaceElement.push('.order-summary-section.order-summary-section-redeem.redeem-login-section');
            }





            if (!$(formData) || $(formData).length == 0) {
                window.location.reload();
                return false;
            }

            var inputurl = '';

            if (($(formData).tagName() != 'form' && $(formData).tagName() != 'input' && $(formData).tagName() != 'div')
                || ($(formData).tagName() == 'input' || $(formData).tagName() == 'div')) {

                formData += ' :input';
            }
            try {
                var listparameters = new URLSearchParams($(formData).serialize());
                var provincetmp = $('body').find('input[name$="selected_customer_shipping_province"]').val();
                if (provincetmp != '') listparameters.set('customer_shipping_province', provincetmp);

                var districttmp = $('body').find('input[name$="selected_customer_shipping_district"]').val();
                if (districttmp != '') listparameters.set('customer_shipping_district', districttmp);

                var wardtmp = $('body').find('input[name$="selected_customer_shipping_ward"]').val();
                if (wardtmp != '') listparameters.set('customer_shipping_ward', wardtmp);

                listparameters.delete('selected_customer_shipping_province');
                listparameters.delete('selected_customer_shipping_district');
                listparameters.delete('selected_customer_shipping_ward');
                inputurl = listparameters.toString();

            } catch (err) {

                // Older Browser URLSearchParams not support
                var listparameters = parseQueryString($(formData).serialize());
                var provincetmp = $('body').find('input[name$="selected_customer_shipping_province"]').val();
                if (provincetmp != '' && listparameters.customer_shipping_province) listparameters.customer_shipping_province = provincetmp;

                var districttmp = $('body').find('input[name$="selected_customer_shipping_district"]').val();
                if (districttmp != '' && listparameters.customer_shipping_district) listparameters.customer_shipping_district = districttmp;

                var wardtmp = $('body').find('input[name$="selected_customer_shipping_ward"]').val();
                if (wardtmp != '' && listparameters.customer_shipping_ward) listparameters.customer_shipping_ward = wardtmp;

                delete listparameters.selected_customer_shipping_province;
                delete listparameters.selected_customer_shipping_district;
                delete listparameters.selected_customer_shipping_ward;

                var listObject = '';
                for (var key in listparameters) {
                    listObject += '&' + key + '=' + encodeURIComponent(listparameters[key]);
                };
                inputurl = listObject.substring(1);

            }


            $.ajax({
                type: 'GET',
                url: window.location.origin + window.location.pathname + '?' + inputurl + encodeURI('&form_name=' + formId),
                success: function (html) {
                    if ($(html).attr('id') == 'redirect-url') {
                        window.location = $(html).val();
                    } else {
                        if (replaceElement.length > 0) {
                            for (var i = 0; i < replaceElement.length; i++) {
                                var tempElement = replaceElement[i];
                                var newElement = $(html).find(tempElement);

                                if (newElement.length > 0) {
                                    if (tempElement == '.step-sections')
                                        $(tempElement).attr('step', $(newElement).attr('step'));

                                    var listTempElement = $(tempElement);

                                    for (var j = 0; j < newElement.length; j++)
                                        if (j < listTempElement.length)
                                            $(listTempElement[j]).html($(newElement[j]).html());
                                }
                            }
                        }



                        $("#div_country_not_vietnam").hide();
                        var is_vietnam_location = $("#is_vietnam_location").val();
                        if (is_vietnam_location && is_vietnam_location == "true") {
                            $("#div_location_country_not_vietnam").hide();
                        }
                        else {
                            $("#div_location_country_not_vietnam").show();
                        }


                        $('body').attr('src', $(html).attr('src'));
                        $(element).find('button:submit').removeClass('btn-loading');

                        if (($('body').find('.field-error') && $('body').find('.field-error').length > 0)
                            || ($('body').find('.has-error') && $('body').find('.has-error').length > 0)) {
                            $("html, body").animate({ scrollTop: 0 }, "slow");
                        }
                        if (funcCallback)
                            funcCallback();
                    }
                }
            }).fail(function () {
                $(element).find('button:submit').removeClass('btn-loading');
            });

            return false;
        };
        function funcSetEvent() {
            var effectControlFieldClass = '.field input, .field select, .field textarea';

            $('body')
                .on('focus', effectControlFieldClass, function () {
                    funcFieldFocus($(this), true);
                })
                .on('blur', effectControlFieldClass, function () {
                    funcFieldFocus($(this), false);
                    funcFieldHasValue($(this), true);
                })
                .on('keyup input paste', effectControlFieldClass, function () {
                    funcFieldHasValue($(this), false);
                })
                .on('submit', 'form', funcFormOnSubmit);





            $("#div_country_not_vietnam").hide();
            $("#is_vietnam_location").val("true");
            $("#div_location_country_not_vietnam").hide();



            $('body')
                .on('change', '#form_update_location_customer_shipping input[id=billing_address_city]', function () {
                    $('#form_update_location_customer_shipping input[id=billing_address_city]').val($(this).val());
                    return false;
                })
                .on('change', '#form_update_location_customer_shipping input[id=billing_address_zip]', function () {
                    $('#form_update_location_customer_shipping input[id=billing_address_zip]').val($(this).val());
                    return false;
                })
                .on('change', '#form_update_location_customer_shipping', function () {
                    funcFormOnSubmit('#form_update_location_customer_shipping');
                })
                .on('change', '#form_update_location_customer_pick_at_location', function () {
                    funcFormOnSubmit('#form_update_location_customer_pick_at_location');
                });


            $('body')

                .on('change', '#form_update_location select[name=customer_shipping_district]', function () {
                    $('.section-customer-information input:hidden[name=customer_shipping_district]').val($(this).val());
                })
                .on('change', '#form_update_location select[name=customer_shipping_ward]', function () {
                    $('.section-customer-information input:hidden[name=customer_shipping_ward]').val($(this).val());
                });



            $('body')
                .on('change', '#form_update_shipping_method input:radio', function () {
                    $('#form_update_shipping_method .content-box-row.content-box-row-secondary').addClass('hidden');

                    var id = $(this).attr('id');

                    if (id) {
                        var sub = $('body').find('.content-box-row.content-box-row-secondary[for=' + id + ']')

                        if (sub && sub.length > 0) {
                            $(sub).removeClass('hidden');
                        }
                    }
                });



            $('body')
                .on('change', '#section-payment-method input:radio', function () {
                    $('#section-payment-method .content-box-row.content-box-row-secondary').addClass('hidden');

                    var id = $(this).attr('id');

                    if (id) {
                        var sub = $('body').find('.content-box-row.content-box-row-secondary[for=' + id + ']')

                        if (sub && sub.length > 0) {
                            $(sub).removeClass('hidden');
                        }
                    }
                });



            $('body')
                .on('change', '#section-shipping-rate input:radio[name=shipping_rate_id]', function () {
                    funcFormOnSubmit('#section-shipping-rate');
                });







            $('body')
                .on('change', '#form_update_shipping_method select[name=customer_shipping_country]', function () {
                    var currentCountry = $(this).val();
                    if (currentCountry && currentCountry != "null" && currentCountry != 241) {
                        $("#is_vietnam_location").val("false");
                        $("#div_location_country_not_vietnam").show();
                    }
                    else {
                        $("#is_vietnam_location").val("true");
                        $("#div_location_country_not_vietnam").hide();
                    }
                })
                .on('change', '#form_update_shipping_method input:radio[name=customer_pick_at_location]', function () {
                    var methodValue = $(this).val();

                    if (methodValue && methodValue == 'false')
                        $('.inventory_location').hide();
                    else
                        $('.inventory_location').show();

                    $('#form_update_shipping_method').submit();
                })
                .on('change', '.inventory_location input:radio[name=inventory_location_id]', function () {
                    $('.section-customer-information input:hidden[name=inventory_location_id]').val($(this).val());
                });


        };
        function funcFieldFocus(fieldInputElement, isFocus) {
            if (fieldInputElement == undefined)
                return;

            var fieldElement = $(fieldInputElement).closest('.field');

            if (fieldElement == undefined)
                return;

            if (isFocus)
                $(fieldElement).addClass('field-active');
            else
                $(fieldElement).removeClass('field-active');
        };
        function funcFieldHasValue(fieldInputElement, isCheckRemove) {
            if (fieldInputElement == undefined)
                return;

            var fieldElement = $(fieldInputElement).closest('.field');

            if (fieldElement == undefined)
                return;

            if ($(fieldElement).find('.field-input-wrapper-select').length > 0) {
                var value = $(fieldInputElement).find(':selected').val();

                if (value == 'null')
                    value = undefined;
            } else {
                var value = $(fieldInputElement).val();
            }

            if (!isCheckRemove) {
                if (value != $(fieldInputElement).attr('value'))
                    $(fieldElement).removeClass('field-error');
            }

            var fieldInputBtnWrapperElement = $(fieldInputElement).closest('.field-input-btn-wrapper');

            if (value && value.trim() != '') {
                $(fieldElement).addClass('field-show-floating-label');
                $(fieldInputBtnWrapperElement).find('button:submit').removeClass('btn-disabled');
            }
            else if (isCheckRemove) {
                $(fieldElement).removeClass('field-show-floating-label');
                $(fieldInputBtnWrapperElement).find('button:submit').addClass('btn-disabled');
            }
            else {
                $(fieldInputBtnWrapperElement).find('button:submit').addClass('btn-disabled');
            }
        };
        function funcInit() {
            funcSetEvent();


        }

        function funcReplaceMembershipInfo(html, replaceElement) {
            var tempElement = $(replaceElement);
            var newElement = $(html).find(replaceElement);
            tempElement.html(newElement.html());
        }

        function funcMembershipInfo() {

        }
        $(document).ready(function () {

            funcInit();
            funcMembershipInfo();

        });

    </script>

    <script type="text/javascript">
        var toggleShowOrderSummary = false;
        $(document).ready(function () {
            var currentUrl = '';


            currentUrl = '/checkouts/43e55c00f5ee4d3f91c117003d8466fe?step=1';


            if ($('#reloadValue').val().length == 0) {
                $('#reloadValue').val(currentUrl);
                $('body').show();
            }
            else {
                window.location = $('#reloadValue').val();
                $('#reloadValue').val('');
            }

            $('body')
                .on('click', '.order-summary-toggle', function () {
                    toggleShowOrderSummary = !toggleShowOrderSummary;

                    if (toggleShowOrderSummary) {
                        $('.order-summary-toggle')
                            .removeClass('order-summary-toggle-hide')
                            .addClass('order-summary-toggle-show');

                        $('.sidebar:not(".sidebar-second") .sidebar-content .order-summary')
                            .removeClass('order-summary-is-collapsed')
                            .addClass('order-summary-is-expanded');

                        $('.sidebar.sidebar-second .sidebar-content .order-summary')
                            .removeClass('order-summary-is-expanded')
                            .addClass('order-summary-is-collapsed');
                    } else {
                        $('.order-summary-toggle')
                            .removeClass('order-summary-toggle-show')
                            .addClass('order-summary-toggle-hide');

                        $('.sidebar:not(".sidebar-second") .sidebar-content .order-summary')
                            .removeClass('order-summary-is-expanded')
                            .addClass('order-summary-is-collapsed');

                        $('.sidebar.sidebar-second .sidebar-content .order-summary')
                            .removeClass('order-summary-is-collapsed')
                            .addClass('order-summary-is-expanded');
                    }
                });
        });
    </script>
    <script type="text/javascript">
        //<![CDATA[
        if ((typeof Haravan) === 'undefined') {
            Haravan = {};
        }
        Haravan.culture = 'vi-VN';
        Haravan.shop = 'dhcshop.myharavan.com';
        Haravan.theme = { "name": "DHC Update ver3", "id": 1000470071, "role": "main" };
        Haravan.domain = 'dhcvietnam.com.vn';
        //]]>
    </script>
    <script type="text/javascript">
        window.HaravanAnalytics = window.HaravanAnalytics || {};
        window.HaravanAnalytics.meta = window.HaravanAnalytics.meta || {};
        window.HaravanAnalytics.meta.currency = 'VND';
        var meta = { "page": { "pageType": "checkout", "resourceType": "checkout", "resourceId": "43e55c00f5ee4d3f91c117003d8466fe" }, "cart": { "products": [{ "variantId": 1014741935, "productId": 1006212106, "price": 438750000.0, "name": "Bộ làn da không tuổi siêu Collagen DHC Super Collagen - Trọn bộ Collagen", "sku": "SP000014", "vendor": "DHC", "variant": "Trọn bộ Collagen", "type": "Combo-set", "quantity": 3 }, { "variantId": 1041235680, "productId": 1020691779, "price": 30000000.0, "name": "Son dưỡng chống nắng DHC UV Moisture Lip Cream 1.5g - Default Title", "sku": "4511413522912", "vendor": "DHC", "variant": "Default Title", "type": "1. Làm đẹp", "quantity": 2 }], "item_count": 5, "total_price": 1376250000.0 } };
        for (var attr in meta) {
            window.HaravanAnalytics.meta[attr] = meta[attr];
        }
    </script>
    <script async="" src="./DHC - Thanh toán đơn hàng_files/haravan-analytics.min.js.tải xuống" type="text/javascript"></script>
    <script>
        //<![CDATA[
        window.HaravanAnalytics.ga = "UA-106045659-1";
        window.HaravanAnalytics.enhancedEcommerce = true;
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
        ga('create', window.HaravanAnalytics.ga, { cookieDomain: 'auto', siteSpeedSampleRate: '10', sampleRate: 100, allowLinker: true });
        ga('require', 'linker');
        //]]>
    </script>
    <script>
        window.HaravanAnalytics.fb = "335864760700645";
        //<![CDATA[
        !function (f, b, e, v, n, t, s) {
            if (f.fbq) return; n = f.fbq = function () {
                n.callMethod ?
                    n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            }; if (!f._fbq) f._fbq = n;
            n.push = n; n.loaded = !0; n.version = '2.0'; n.queue = []; t = b.createElement(e); t.async = !0;
            t.src = v; s = b.getElementsByTagName(e)[0]; s.parentNode.insertBefore(t, s)
        }(window,
            document, 'script', '//connect.facebook.net/en_US/fbevents.js');
        // Insert Your Facebook Pixel ID below.
        fbq('init', window.HaravanAnalytics.fb, {}, { 'agent': 'plharavan' });
        fbq('track', 'PageView');
            //]]>
    </script>

</head>
<body style="">
    @RenderBody()

  
</body>
</html>